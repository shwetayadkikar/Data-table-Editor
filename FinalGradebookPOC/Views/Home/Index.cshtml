@model List<FinalGradebookPOC.Models.ColumnsModel>
@{
    ViewBag.Title = "Home Page";
}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.Title - My ASP.NET Application</title>
    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")
    <link href="~/Content/jquery.bxslider.css" rel="stylesheet" />
    <link href="~/Content/dataTables.editor.css" rel="stylesheet" />
    <link href="~/Content/toastr.css" rel="stylesheet" />

    <script src="~/Scripts/jquery-1.10.2.js"></script>
    @*<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.11.0/jquery-ui.js"></script>*@

    <script src="~/Scripts/jquery.bxslider.min.js"></script>
    @*<script src="//cdn.datatables.net/1.10.2/js/jquery.dataTables.min.js"></script>*@

    <script src="~/Scripts/DataTables-1.10.2/media/js/jquery.dataTables.js"></script>
    @*<script src="~/Scripts/dataTables.editor.min.js"></script>
        <script src="~/Scripts/dataTables.editor.js"></script>*@
    <script src="~/Scripts/jquery.validate.js"></script>
    <script src="~/Scripts/toastr.js"></script>
    <script src="~/Scripts/getHiddenColumns.js"></script>
    <script src="~/Scripts/app/tableEditor.js"></script>
    <script src="~/Scripts/app/app.js"></script>
</head>
<body>
    <div class="jumbotron">
        <h1>ASP.NET</h1>
        <p class="lead">ASP.NET is a free web framework for building great Web sites and Web applications using HTML, CSS and JavaScript.</p>
        <p><a href="http://asp.net" class="btn btn-primary btn-large">Learn more &raquo;</a></p>
    </div>

    <div class="row">
        <div class="slider" id="carousel">

            @foreach (var item in Model)
            {
                if (item.Index != "0")
                {
                    <div class="slide" data-id="@item.Index">
                        @item.ColumnName
                    </div>
                }

            }
            @*<div class="slide" data-id="1000">
                    the fake one
                </div>*@

        </div>

        <div id="tablecontent" style=" margin-left: 60px; margin-right: 60px; width:75%">
            @Html.HiddenFor(m => m.Count, new { Name = "colCount" })

            @Html.Hidden("midDiv", 8)
            <table id="myDataTable" class="table table-striped table-bordered" cellspacing="0" style="width: 1000px; border: 1px solid green;">
                <thead>
                    <tr>
                        @foreach (var item in Model)
                        {
                            <th data-id="@item.Index">
                                @item.Index
                                <input type="hidden" data-id="@item.Index" value="@item.Type" name="colType" />
                                <input type="hidden" data-id="@item.Index" value="@item.PossibleValues" name="colPossValues" />
                            </th>

                        }
                    </tr>
                </thead>

            </table>
        </div>
    </div>
</body>
</html>

<script type="text/javascript">
    //var editor, mytable;
    //$(document).ready(function () {
    //    var colCount = $("input[name='colCount']").val();
    //    var columns = [];
    //    var fields = [];
    //    for (var k = 0; k < colCount; k++) {
    //        columns.push({ "data": k.toString(), "width" : "10%" });
    //        var type = $("input[name='colType']").filter(function () { return $(this).data('id') === k; }).val();
    //        var iOpts = [];
    //        if (type == "select") {
    //            var strPossValues = $("input[name='colPossValues']").filter(function () { return $(this).data('id') === k; }).val();
    //            var possValues = [];
    //            if (strPossValues) {
    //                possValues = strPossValues.split(",");
    //            }
    //            for (var i = 0; i < possValues.length; i++) {
    //                iOpts.push(
    //                    {
    //                        "label": possValues[i],
    //                        "Value": possValues[i]
    //                    }
    //                    );
    //            }
    //            fields.push(
    //           {
    //               "name": k.toString(),
    //               "type": type,
    //               "ipOpts": iOpts

    //           });
    //        }
    //        else {
    //            fields.push(
    //                {
    //                    "name": k.toString()
    //                });
    //        }
    //    }

    //    editor = new $.fn.dataTable.Editor({
    //        ajax: "Home/GetData",
    //        table: "#myDataTable",
    //        fields: fields
    //    });

    //    $('#myDataTable').on('click', 'tbody td:not(:first-child)', function (e) {
    //        editor.inline(this, {
    //            submitOnBlur: true
    //        });
    //    });

    //    mytable = $('#myDataTable').DataTable({
    //        dom: "Tfrtip",
    //        ajax: 'Home/GetData',
    //        searching: false,
    //        paging: false,
    //        ordering: false,
    //        columns: columns,

    //    });

    //    var visibleColumns = 10; //number of visible columns

    //    //mytable.columns().visible(false);
    //    //for (i = 0; i < visibleColumns; i++) {
    //    //    mytable.column(i).visible(true);
    //    //}

    //    var carousel = $('#carousel').bxSlider({
    //        slideWidth: 90,
    //        minSlides: 1,
    //        maxSlides: 100,
    //        infiniteLoop: false,
    //        hideControlOnEnd:true,
    //        moveSlides: 1,
    //        pager: false,
    //        slideMargin: 10,
    //        onSliderLoad: function (currentIndex) {
    //           // alert("loading");
    //            console.log("Loaded Slider");
    //            mytable.columns().visible(false);
    //            for (i = 0; i < visibleColumns; i++) {
    //                mytable.column(i).visible(true);
    //            }

    //        },
    //        onSlideNext: function ($slide, oldIndex, newIndex) {
    //            var totalColumns = mytable.column()[0].length;
    //            var columnToShowIndex = (newIndex + visibleColumns - 1);

    //            console.log("Show : " + columnToShowIndex);
    //            console.log("Hide : " + oldIndex);
    //            //hide first column
    //            mytable.columns(oldIndex).visible(false);
    //            //show new column
    //            mytable.columns(columnToShowIndex).visible(true);
    //            var options = { direction: "right"  }; $('#myDataTable').effect("slide", options, 1000);

    //        },
    //        onSlidePrev: function ($slide, oldIndex, newIndex) {
    //            var totalColumns = mytable.column()[0].length;
    //            var columnToHideIndex = (oldIndex + visibleColumns - 1);

    //            console.log("Show : " + newIndex);
    //            console.log("Hide : " + columnToHideIndex);
    //            //hide first column
    //            mytable.columns(columnToHideIndex).visible(false);
    //            //show new column
    //            mytable.columns(newIndex).visible(true);
    //            var options = { direction: "left" }; $('#myDataTable').effect("slide", options, 1000);
    //        }

    //    });
    //});

</script>
